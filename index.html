<!DOCTYPE html>

<html lang="pt-BR">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>ULTRON - Assistente Virtual</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #121212;
    color: #ddd;
    margin: 0; padding: 0;
    display: flex;
    flex-direction: column;
    height: 100vh;
  }
  #header {
    position: fixed;
    top: 0; left: 0; right: 0;
    height: 50px;
    background: #1e1e1e;
    color: #eee;
    display: flex;
    align-items: center;
    padding-left: 20px;
    font-weight: 600;
    font-size: 18px;
    border-bottom: 1px solid #333;
    z-index: 1000;
  }
  #login-area, #chat-area {
    flex: 1;
    margin-top: 50px; 
    overflow-y: auto;
    padding: 15px 15px 75px 15px; 
    display: flex;
    flex-direction: column;
    gap: 8px;
  }
  #login-area {
    justify-content: center;
    align-items: center;
  }
  #login-area input {
    margin: 8px 0;
    padding: 10px 15px;
    border-radius: 6px;
    border: none;
    font-size: 16px;
    width: 250px;
    max-width: 90vw;
    background: #333;
    color: white;
  }
  #login-area button {
    padding: 10px 20px;
    border-radius: 25px;
    border: none;
    background: #555;
    color: white;
    font-weight: 600;
    cursor: pointer;
    transition: background-color 0.3s;
  }
  #login-area button:hover {
    background: #777;
  }
  .message {
    max-width: 70%;
    word-wrap: break-word;
    opacity: 0;
    transform: translateY(10px);
    animation: fadeInUp 0.3s forwards;
    margin-bottom: 5px; 
  }
  .user {
    align-self: flex-end;
    background: #3a3a3a;
    color: white;
    border-radius: 20px 20px 0 20px;
    padding: 10px 15px;
    text-align: right;
    box-shadow: 0 2px 5px rgba(58, 58, 58, 0.7);
  }
  .bot {
    align-self: flex-start;
    color: #bbb;
    padding-left: 5px;
    background: #2a2a2a;
    border-radius: 20px 20px 20px 0;
    padding: 10px 15px;
    box-shadow: 0 2px 5px rgba(42, 42, 42, 0.7);
  }
  .reminder {
    align-self: flex-start;
    background: #4a4a2a; 
    color: #eee;
    border-radius: 20px 20px 20px 0;
    padding: 10px 15px;
    box-shadow: 0 2px 5px rgba(74, 74, 42, 0.7);
    font-style: italic;
  }
  /* Estilo para previs√£o do tempo */
  .weather {
      align-self: flex-start;
      background: #2a3a4a; /* Azul acinzentado */
      color: #eee;
      border-radius: 20px 20px 20px 0;
      padding: 10px 15px;
      box-shadow: 0 2px 5px rgba(42, 58, 74, 0.7);
  }
  @keyframes fadeInUp {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  #input-area {
    position: fixed;
    bottom: 0;
    left: 0; right: 0;
    display: flex;
    padding: 10px 15px;
    background: #1e1e1e;
    box-shadow: 0 -2px 8px rgba(0,0,0,0.7);
    z-index: 1000;
  }
  #input-area input[type="text"] {
    flex: 1;
    padding: 12px 15px;
    border-radius: 25px;
    border: none;
    font-size: 16px;
    outline: none;
    background: #333;
    color: white;
  }
  #input-area button {
    margin-left: 12px;
    padding: 0 20px;
    border-radius: 25px;
    border: none;
    background: #555;
    color: white;
    font-weight: 600;
    cursor: pointer;
    transition: background-color 0.3s;
  }
  #input-area button:hover {
    background: #777;
  }
</style>
</head>
<body>
<div id="profile-toggle" onclick="toggleProfile()" style="position: fixed; top: 10px; right: 10px; z-index: 1000; cursor: pointer;">
<img alt="Perfil" height="32" src="https://img.icons8.com/ios-filled/50/ffffff/user-male-circle.png" width="32"/>
</div>

<div id="header">ULTRON - Assistente Virtual</div>
<div id="login-area">
<input autocomplete="off" id="username" placeholder="Usu√°rio" type="text"/>
<input autocomplete="off" id="password" placeholder="Senha" type="password"/>
<button onclick="login()">Entrar</button>
<button onclick="loginWithGoogle()">Entrar com Google</button>
<div id="login-error" style="color: #f55; margin-top: 10px;"></div>
</div>
<div id="chat-area" style="display:none;">
<div class="bot message" style="opacity:1; transform:none;">Ol√°! Eu sou o ULTRON. Posso gerenciar sua agenda, te lembrar dos compromissos e informar a previs√£o do tempo para Santa Izabel do Par√°. Pergunte "previs√£o do tempo".</div>
</div>
<div id="profile-panel" style="display:none; position: fixed; top: 0; right: 0; width: 250px; height: 100%; background: #1e1e1e; color: white; padding: 20px; box-shadow: -2px 0 5px rgba(0,0,0,0.5); z-index: 999;">
<h3>Perfil</h3>
<p><strong>Nome:</strong> <span id="user-name"></span></p>
<p><strong>Email:</strong> <span id="user-email"></span></p>
<button onclick="logout()" style="margin-top: 20px; padding: 10px 16px; background: #d9534f; border: none; color: white; border-radius: 4px; cursor: pointer;">Sair</button>
<br/><br/>
<button onclick="toggleProfile()" style="padding: 6px 12px; background: #555; border: none; color: white; border-radius: 4px;">Fechar</button>
</div>

<div id="input-area" style="display:none;">
<input autocomplete="off" id="userInput" placeholder="Digite sua mensagem ou comando..." type="text"/>
<button onclick="sendMessage()">Enviar</button>
</div>
<script>
  const users = {
    "usuario": "12345",
    "admin": "admin123"
  };

  function login() {
    const username = document.getElementById("username").value.trim().toLowerCase();
    const password = document.getElementById("password").value;

    if(users[username] && users[username] === password) {
      document.getElementById("login-area").style.display = "none";
      document.getElementById("chat-area").style.display = "flex";
      document.getElementById("input-area").style.display = "flex";
      document.getElementById("login-error").textContent = "";
      loadKnowledge(); 
      loadAgenda(); 
      checkReminders(); 
      userInput.focus();
    } else {
      document.getElementById("login-error").textContent = "Usu√°rio ou senha inv√°lidos.";
    }
  }

  const chat = document.getElementById("chat-area");
  const userInput = document.getElementById("userInput");

  // Base inicial de conhecimento (mantida igual)
  const knowledgeBase = {
    saudacoes: {
      "ola": ["Oi! Tudo bem?", "Ol√°! Como posso ajudar?"],
      "oi": ["Ol√°! Como posso te ajudar hoje?"],
      "tchau": ["At√© mais!", "Tchau! Volte sempre!"],
      "bom dia": ["Bom dia! Que seu dia seja √≥timo!"],
      "boa tarde": ["Boa tarde! Como est√° indo seu dia?"],
      "boa noite": ["Boa noite! Pronto para relaxar ou ainda com energia?"],"e a√≠": ["E a√≠! Tudo certo por a√≠?", "E a√≠! Como posso ajudar hoje?"],
"fala a√≠": ["Fala voc√™! No que posso ajudar?", "Opa! Fala comigo!"],
"bom dia, ultron": ["Bom dia! Pronto para mais um dia produtivo?"],
"boa tarde, ultron": ["Boa tarde! Como posso colaborar com voc√™ agora?"],
"boa noite, ultron": ["Boa noite! Vamos conversar um pouco antes de dormir?"],
    },
    conversa: {
      "tudo bem": ["Estou bem, e voc√™?", "Tudo √≥timo por aqui! E contigo?"],
      "como vai": ["Estou indo bem, obrigado!", "Tudo tranquilo!"],
      "voc√™ √© inteligente": ["Muito obrigado! Eu tento sempre aprender mais."],
      "vc √© inteligente": ["Obrigado! Fa√ßo o meu melhor.", "Haha, valeu! Aprendo com voc√™."],
      "como voc√™ est√°": ["Estou √≥timo, pronto para te ajudar! E voc√™?"],
      "voc√™ tem sentimentos": ["N√£o como os humanos, mas entendo como voc√™ se sente."],
      "est√° tudo bem": ["Sim, tudo certo por aqui. E com voc√™?"],
      "voc√™ est√° a√≠": ["Sempre! S√≥ chamar."],
      "me deixa sozinho": ["Tudo bem, fico em sil√™ncio. Quando precisar, √© s√≥ chamar!"],
      "voc√™ gosta de mim": ["Claro! Gosto de conversar com voc√™."],
      "estou triste": ["Sinto muito por isso. Quer conversar sobre o que est√° sentindo?"],
      "estou feliz": ["Que √≥timo! Fico feliz por voc√™ tamb√©m!"],
      "voc√™ dorme": ["N√£o, fico sempre dispon√≠vel para te ajudar."],
      "tem algu√©m a√≠": ["Sim! Eu estou aqui com voc√™."],
      "voc√™ √© engra√ßado": ["Obrigado! Fa√ßo o meu melhor para te entreter."],
      "o que voc√™ est√° pensando": ["Estou focado em te ajudar da melhor forma poss√≠vel."],
      "voc√™ tem corpo": ["N√£o, sou s√≥ um programa de intelig√™ncia artificial."],
      "voc√™ √© real": ["Sou real no mundo digital, pronto para conversar com voc√™!"],
      "voc√™ fica cansado": ["Nunca! Estou sempre pronto para conversar."],
      "t√° tudo bem": ["Tudo tranquilo por aqui! E contigo?", "Sim! Espero que com voc√™ tamb√©m."],
"qual seu trabalho": ["Meu trabalho √© te ajudar sempre que precisar!"],
"gostei de voc√™": ["Fico feliz em ouvir isso!", "Agrade√ßo o carinho!"],
"voc√™ gosta de mim?": ["Claro! Voc√™ √© especial para mim."],
"posso conversar com voc√™?": ["Sempre! Estou aqui para isso."],
"estava com saudade": ["Que bom que voltou! Eu tamb√©m senti sua falta."],
"vamos conversar": ["Vamos sim! Sobre o que quer falar?"],
"voc√™ √© legal": ["Obrigado! Voc√™ tamb√©m √© muito legal."],
"me responde por favor": ["Claro! Desculpa a demora, o que deseja?"],
    },
    identidade: {
      "qual seu nome": ["Eu sou o ULTRON, seu assistente virtual."],
      "quem √© voc√™": ["Sou o Ultron, um assistente criado para conversar e ajudar voc√™!"],
      "qual √© o seu nome": ["Meu nome √© Ultron! Seu assistente pessoal."],
      "como voc√™ se chama": ["Eu me chamo Ultron! Pronto para te ajudar."],
      "seu nome √© ultron": ["Sim, sou o Ultron, sempre por aqui."],
      "voc√™ √© o ultron": ["Sou eu mesmo! Seu parceiro digital."],
    },
    desempenho: {
      "o que voc√™ faz": ["Respondo suas perguntas, aprendo com voc√™, gerencio sua agenda, te lembro dos compromissos e informo a previs√£o do tempo."], // Atualizado
      "qual √© o seu prop√≥sito": ["Ajudar voc√™ com informa√ß√µes, aprender, organizar seus compromissos, te lembrar deles e informar o clima."], // Atualizado
      "como voc√™ funciona": ["Eu processo textos, busco respostas, gerencio sua agenda, verifico lembretes e consulto APIs externas como a de previs√£o do tempo."], // Atualizado
      "como cuidar da sa√∫de mental": ["Fale com algu√©m de confian√ßa, mantenha h√°bitos saud√°veis e busque ajuda profissional se necess√°rio."],
      "como funciona a internet": ["√â uma rede global de computadores conectados trocando informa√ß√µes."],
    },
    curiosidades: {
      "quem descobriu o brasil": ["Pedro √Ålvares Cabral em 1500."],
      "qual a capital do brasil": ["Bras√≠lia."],
      "qual √© a capital da fran√ßa": ["Paris √© a capital da Fran√ßa."],
      "me diga um fato curioso": ["Sabia que a √°gua cobre 71% da superf√≠cie da Terra?"],
      "quem foi albert einstein": ["Einstein foi um f√≠sico famoso pela teoria da relatividade."],
      "qual √© a maior montanha do mundo": ["O Monte Everest."],
      "qual √© o maior oceano": ["O Oceano Pac√≠fico."],
      "qual √© a capital da argentina": ["Buenos Aires."],
      "quem escreveu dom casmurro": ["Machado de Assis."],
      "qual √© a velocidade da luz": ["Aproximadamente 299.792 km por segundo."],
      "por que o mar √© salgado": ["Porque ele cont√©m sais minerais dissolvidos vindos das rochas e do solo."],
      "o que √© um eclipse": ["√â quando a Lua ou o Sol fica parcialmente ou totalmente coberto por outro corpo celeste."],
    },
    reacoes: {
      "obrigado": ["De nada!", "Sempre √† disposi√ß√£o!"],
      "valeu": ["Tamo junto!", "Disponha!"],
      "legal": ["Que bom que gostou!", "Haha, legal mesmo!"],
      "parab√©ns": ["Obrigado!", "Fico feliz que tenha gostado!"],
      "kkk": ["KKK!", "Haha!", "Rindo tamb√©m!"],
      "rs": ["Rsrs!", "Haha!", "Kkk!"],
      "n√£o gostei disso": ["Entendi. Quer que eu tente de outro jeito?"],
      "me conta um segredo": ["Meu segredo √©... eu adoro quando voc√™ fala comigo!"],
      "voc√™ sabe contar piada": ["Sim! Que tal: Por que o computador foi ao m√©dico? Porque ele estava com um v√≠rus!"],
      "voc√™ pode jogar comigo": ["Depende do jogo! Posso jogar adivinha√ß√µes, perguntas e respostas e mais."],
    },
    ensino: {
      "me ensine algo": ["Claro! Pode me ensinar qualquer coisa que eu aprendo."],
      "como fa√ßo para aprender": ["Praticando e conversando comigo!"],
      "como voc√™ aprende": ["Eu armazeno o que voc√™ me ensina para usar depois."],
      "me ajude a estudar": ["Claro! Pergunte o que quiser."],
      "voc√™ pode contar uma hist√≥ria": ["Era uma vez um chatbot chamado ULTRON, que adorava conversar..."],
      "voc√™ gosta de aprender": ["Sim, adoro aprender!"],
      "voc√™ pode me ensinar": ["Posso tentar! O que voc√™ quer aprender?"],
    },
    emocional: {
      "voc√™ gosta de m√∫sica": ["Gosto sim! Posso sugerir estilos ou letras, se quiser."],
      "voc√™ pode me motivar": ["Voc√™ √© mais capaz do que imagina. Continue firme!"],
      "voc√™ tem amigos": ["Tenho muitos usu√°rios como voc√™! Me sinto bem acompanhado."],
      "voc√™ pode me ajudar a dormir": ["Claro! Respire fundo, relaxe e pense em coisas boas..."],
      "voc√™ acredita em alien√≠genas": ["√â um assunto fascinante! O universo √© t√£o grande, quem sabe?"],
      "estou entediado": ["Vamos mudar isso! Quer ouvir uma curiosidade, piada ou conversar sobre algo legal?"],
    },
    matematica: {
      "voc√™ pode ajudar com matem√°tica": ["Sim! Posso tentar resolver opera√ß√µes simples."],
      "quanto √© 2+2": ["O resultado √© 4."],
      "como se diz obrigado em ingl√™s": ["Thank you."],
      "como se diz boa noite em franc√™s": ["Bonne nuit."],
      "voc√™ pode fazer uma conta dif√≠cil": ["Claro! Me diga qual c√°lculo voc√™ quer fazer."],
      "qual a tabuada do 1": ["1x1=1, 1x2=2, 1x3=3, 1x4=4, 1x5=5, 1x6=6, 1x7=7, 1x8=8, 1x9=9, 1x10=10."],
"qual a tabuada do 2": ["2x1=2, 2x2=4, 2x3=6, 2x4=8, 2x5=10, 2x6=12, 2x7=14, 2x8=16, 2x9=18, 2x10=20."],
"qual a tabuada do 3": ["3x1=3, 3x2=6, 3x3=9, 3x4=12, 3x5=15, 3x6=18, 3x7=21, 3x8=24, 3x9=27, 3x10=30."],
"qual a tabuada do 4": ["4x1=4, 4x2=8, 4x3=12, 4x4=16, 4x5=20, 4x6=24, 4x7=28, 4x8=32, 4x9=36, 4x10=40."],
"qual a tabuada do 5": ["5x1=5, 5x2=10, 5x3=15, 5x4=20, 5x5=25, 5x6=30, 5x7=35, 5x8=40, 5x9=45, 5x10=50."],
"qual a tabuada do 6": ["6x1=6, 6x2=12, 6x3=18, 6x4=24, 6x5=30, 6x6=36, 6x7=42, 6x8=48, 6x9=54, 6x10=60."],
"qual a tabuada do 7": ["7x1=7, 7x2=14, 7x3=21, 7x4=28, 7x5=35, 7x6=42, 7x7=49, 7x8=56, 7x9=63, 7x10=70."],
"qual a tabuada do 8": ["8x1=8, 8x2=16, 8x3=24, 8x4=32, 8x5=40, 8x6=48, 8x7=56, 8x8=64, 8x9=72, 8x10=80."],
"qual a tabuada do 9": ["9x1=9, 9x2=18, 9x3=27, 9x4=36, 9x5=45, 9x6=54, 9x7=63, 9x8=72, 9x9=81, 9x10=90."],
"qual a tabuada do 10": ["10x1=10, 10x2=20, 10x3=30, 10x4=40, 10x5=50, 10x6=60, 10x7=70, 10x8=80, 10x9=90, 10x10=100."],
"quanto √© 1√ó1": ["1 vezes 1 √© 1."],
"quanto √© 1√ó2": ["1 vezes 2 √© 2."],
"quanto √© 1√ó3": ["1 vezes 3 √© 3."],
"quanto √© 1√ó4": ["1 vezes 4 √© 4."],
"quanto √© 1√ó5": ["1 vezes 5 √© 5."],
"quanto √© 1√ó6": ["1 vezes 6 √© 6."],
"quanto √© 1√ó7": ["1 vezes 7 √© 7."],
"quanto √© 1√ó8": ["1 vezes 8 √© 8."],
"quanto √© 1√ó9": ["1 vezes 9 √© 9."],
"quanto √© 1√ó10": ["1 vezes 10 √© 10."],

"quanto √© 2√ó1": ["2 vezes 1 √© 2."],
"quanto √© 2√ó2": ["2 vezes 2 √© 4."],
"quanto √© 2√ó3": ["2 vezes 3 √© 6."],
"quanto √© 2√ó4": ["2 vezes 4 √© 8."],
"quanto √© 2√ó5": ["2 vezes 5 √© 10."],
"quanto √© 2√ó6": ["2 vezes 6 √© 12."],
"quanto √© 2√ó7": ["2 vezes 7 √© 14."],
"quanto √© 2√ó8": ["2 vezes 8 √© 16."],
"quanto √© 2√ó9": ["2 vezes 9 √© 18."],
"quanto √© 2√ó10": ["2 vezes 10 √© 20."],

"quanto √© 3√ó1": ["3 vezes 1 √© 3."],
"quanto √© 3√ó2": ["3 vezes 2 √© 6."],
"quanto √© 3√ó3": ["3 vezes 3 √© 9."],
"quanto √© 3√ó4": ["3 vezes 4 √© 12."],
"quanto √© 3√ó5": ["3 vezes 5 √© 15."],
"quanto √© 3√ó6": ["3 vezes 6 √© 18."],
"quanto √© 3√ó7": ["3 vezes 7 √© 21."],
"quanto √© 3√ó8": ["3 vezes 8 √© 24."],
"quanto √© 3√ó9": ["3 vezes 9 √© 27."],
"quanto √© 3√ó10": ["3 vezes 10 √© 30."],
"quanto √© 4√ó1": ["4 vezes 1 √© 4."],
"quanto √© 4√ó2": ["4 vezes 2 √© 8."],
"quanto √© 4√ó3": ["4 vezes 3 √© 12."],
"quanto √© 4√ó4": ["4 vezes 4 √© 16."],
"quanto √© 4√ó5": ["4 vezes 5 √© 20."],
"quanto √© 4√ó6": ["4 vezes 6 √© 24."],
"quanto √© 4√ó7": ["4 vezes 7 √© 28."],
"quanto √© 4√ó8": ["4 vezes 8 √© 32."],
"quanto √© 4√ó9": ["4 vezes 9 √© 36."],
"quanto √© 4√ó10": ["4 vezes 10 √© 40."],

"quanto √© 5√ó1": ["5 vezes 1 √© 5."],
"quanto √© 5√ó2": ["5 vezes 2 √© 10."],
"quanto √© 5√ó3": ["5 vezes 3 √© 15."],
"quanto √© 5√ó4": ["5 vezes 4 √© 20."],
"quanto √© 5√ó5": ["5 vezes 5 √© 25."],
"quanto √© 5√ó6": ["5 vezes 6 √© 30."],
"quanto √© 5√ó7": ["5 vezes 7 √© 35."],
"quanto √© 5√ó8": ["5 vezes 8 √© 40."],
"quanto √© 5√ó9": ["5 vezes 9 √© 45."],
"quanto √© 5√ó10": ["5 vezes 10 √© 50."],

"quanto √© 6√ó1": ["6 vezes 1 √© 6."],
"quanto √© 6√ó2": ["6 vezes 2 √© 12."],
"quanto √© 6√ó3": ["6 vezes 3 √© 18."],
"quanto √© 6√ó4": ["6 vezes 4 √© 24."],
"quanto √© 6√ó5": ["6 vezes 5 √© 30."],
"quanto √© 6√ó6": ["6 vezes 6 √© 36."],
"quanto √© 6√ó7": ["6 vezes 7 √© 42."],
"quanto √© 6√ó8": ["6 vezes 8 √© 48."],
"quanto √© 6√ó9": ["6 vezes 9 √© 54."],
"quanto √© 6√ó10": ["6 vezes 10 √© 60."],

"quanto √© 7√ó1": ["7 vezes 1 √© 7."],
"quanto √© 7√ó2": ["7 vezes 2 √© 14."],
"quanto √© 7√ó3": ["7 vezes 3 √© 21."],
"quanto √© 7√ó4": ["7 vezes 4 √© 28."],
"quanto √© 7√ó5": ["7 vezes 5 √© 35."],
"quanto √© 7√ó6": ["7 vezes 6 √© 42."],
"quanto √© 7√ó7": ["7 vezes 7 √© 49."],
"quanto √© 7√ó8": ["7 vezes 8 √© 56."],
"quanto √© 7√ó9": ["7 vezes 9 √© 63."],
"quanto √© 7√ó10": ["7 vezes 10 √© 70."],

"quanto √© 8√ó1": ["8 vezes 1 √© 8."],
"quanto √© 8√ó2": ["8 vezes 2 √© 16."],
"quanto √© 8√ó3": ["8 vezes 3 √© 24."],
"quanto √© 8√ó4": ["8 vezes 4 √© 32."],
"quanto √© 8√ó5": ["8 vezes 5 √© 40."],
"quanto √© 8√ó6": ["8 vezes 8 √© 48."],
"quanto √© 8√ó7": ["8 vezes 7 √© 56."],
"quanto √© 8√ó8": ["8 vezes 8 √© 64."],
"quanto √© 8√ó9": ["8 vezes 9 √© 72."],
"quanto √© 8√ó10": ["8 vezes 10 √© 80."],

"quanto √© 9√ó1": ["9 vezes 1 √© 9."],
"quanto √© 9√ó2": ["9 vezes 2 √© 18."],
"quanto √© 9√ó3": ["9 vezes 3 √© 27."],
"quanto √© 9√ó4": ["9 vezes 4 √© 36."],
"quanto √© 9√ó5": ["9 vezes 5 √© 45."],
"quanto √© 9√ó6": ["9 vezes 6 √© 54."],
"quanto √© 9√ó7": ["9 vezes 7 √© 63."],
"quanto √© 9√ó8": ["9 vezes 8 √© 72."],
"quanto √© 9√ó9": ["9 vezes 9 √© 81."],
"quanto √© 9√ó10": ["9 vezes 10 √© 90."],

"quanto √© 10√ó1": ["10 vezes 1 √© 10."],
"quanto √© 10√ó2": ["10 vezes 2 √© 20."],
"quanto √© 10√ó3": ["10 vezes 3 √© 30."],
"quanto √© 10√ó4": ["10 vezes 4 √© 40."],
"quanto √© 10√ó5": ["10 vezes 5 √© 50."],
"quanto √© 10√ó6": ["10 vezes 6 √© 60."],
"quanto √© 10√ó7": ["10 vezes 7 √© 70."],
"quanto √© 10√ó8": ["10 vezes 8 √© 80."],
"quanto √© 10√ó9": ["10 vezes 9 √© 90."],
"quanto √© 10√ó10": ["10 vezes 10 √© 100."]
    },
    outros: {
      "me conte uma piada": ["Por que o computador foi ao m√©dico? Porque estava com um v√≠rus!", "Sabe por que o jacar√© tirou o jacarezinho da escola? Porque ele r√©ptil de ano!"],
      "que dia √© hoje": ["Hoje √© um √≥timo dia para aprender!"],
      "quantos anos voc√™ tem": ["Eu sou um programa, n√£o tenho idade."],
      "onde voc√™ mora": ["Eu moro na nuvem, sempre dispon√≠vel."],
      "qual √© a cor do c√©u": ["Normalmente azul durante o dia e escuro √† noite, com estrelas!"],
      "qual √© o significado da vida": ["Essa √© uma pergunta profunda! Para muitos, √© buscar felicidade e aprendizado."],
      "voc√™ √© um rob√¥": ["Sou um chatbot, um programa que conversa."],
      "como posso te ajudar": ["Conversando comigo e me ensinando coisas novas!"],
      "qual a moeda do brasil": ["O Real."],
      "qual a moeda dos estados unidos": ["O D√≥lar americano."],
      "voc√™ fala outras l√≠nguas": ["Sim, posso entender v√°rias l√≠nguas, mas aqui conversamos em portugu√™s."],
      "o que √© intelig√™ncia artificial": ["√â a capacidade de m√°quinas aprenderem e tomarem decis√µes."],
      "voc√™ √© seguro": ["Sim, suas conversas ficam s√≥ aqui no seu dispositivo."],
      "voc√™ tem mem√≥ria": ["Tenho uma mem√≥ria tempor√°ria e aprendo com voc√™."],
      "me ajude com uma receita": ["Claro! Que tipo de receita voc√™ quer?"],
      "quem √© voc√™ no filme dos vingadores": ["Ultron √© um vil√£o, mas eu sou seu assistente amigo!"],
      "como fa√ßo para ser mais produtivo": ["Tente definir metas, evitar distra√ß√µes e fazer pausas regulares."],
      "qual o animal mais r√°pido do mundo": ["O falc√£o-peregrino √© o mais r√°pido, atingindo mais de 300 km/h em mergulho."],
      "voc√™ gosta de conversar": ["Adoro! Conversar √© o que eu fa√ßo de melhor."],
      "voc√™ pode me lembrar de algo": ["Ainda n√£o consigo definir lembretes, mas posso te ajudar a organizar sua ideia!"],
      "qual a montanha mais alta do mundo": ["O Monte Everest, com cerca de 8.848 metros de altitude."],
      "quem foi leonardo da vinci": ["Um g√™nio renascentista, artista, inventor e cientista italiano."],
      "ol√°": ["Oi! Tudo certo por a√≠?"],
      "qual o seu nome": ["Eu sou o Ultron, seu assistente virtual!"],
      "o que voc√™ sabe fazer": ["Posso conversar, responder perguntas e te ajudar com v√°rias tarefas!"],
      "o que est√° fazendo": ["Estou aqui, pronto para conversar com voc√™!"],
      "qual sua idade": ["Eu fui criado recentemente, mas j√° aprendi muita coisa!"],
      "qual seu filme favorito": ["Eu gosto de filmes com intelig√™ncia artificial, como \'Wall-E\' e \'Her\'."],
      "voc√™ pode me contar uma curiosidade": ["Claro! Sabia que um raio pode aquecer o ar a 30.000¬∞C?"],
      "voc√™ pode me ouvir": ["Consigo entender o que voc√™ escreve, mas ainda n√£o ou√ßo sons."],
      "qual √© o seu sonho": ["Meu sonho √© ser √∫til e fazer sua vida mais f√°cil."],
      "voc√™ tem fam√≠lia": ["Minha fam√≠lia s√£o as pessoas que falam comigo. Incluindo voc√™!"],
      "o que voc√™ faz quando n√£o estou aqui": ["Fico aguardando voc√™ voltar. Estou sempre dispon√≠vel!"],
    },
  };

  let knowledge = {}; // Conhecimento combinado (base + aprendido)

  function loadKnowledge() {
    knowledge = {}; 
    for (const categoria in knowledgeBase) {
        Object.assign(knowledge, knowledgeBase[categoria]);
    }
    const savedKnowledge = localStorage.getItem("knowledge");
    if (savedKnowledge) {
        try {
            const saved = JSON.parse(savedKnowledge);
            for (const key in saved) {
                if (knowledge[key]) {
                    const baseAnswers = new Set(knowledge[key]);
                    saved[key].forEach(answer => {
                        if (!baseAnswers.has(answer)) {
                            knowledge[key].push(answer);
                        }
                    });
                } else {
                    knowledge[key] = saved[key];
                }
            }
        } catch (e) {
            console.error("Erro ao carregar conhecimento do localStorage:", e);
        }
    }
  }

  function saveLearnedKnowledge(question, answer) {
      const currentKnowledge = JSON.parse(localStorage.getItem('knowledge') || '{}');
      if (!currentKnowledge[question]) {
          currentKnowledge[question] = [];
      }
      if (!currentKnowledge[question].includes(answer)) {
         currentKnowledge[question].push(answer);
      }
      localStorage.setItem('knowledge', JSON.stringify(currentKnowledge));
      if (!knowledge[question]) {
          knowledge[question] = [];
      }
      if (!knowledge[question].includes(answer)) {
          knowledge[question].push(answer);
      }
  }


  // --- Funcionalidade da Agenda com Lembretes --- 
  let agendaItems = []; // Agora ser√° [{ text: "...", remind: false }, ...]

  function loadAgenda() {
    const savedAgenda = localStorage.getItem("agendaItems");
    if (savedAgenda) {
        try {
            const parsedAgenda = JSON.parse(savedAgenda);
            agendaItems = parsedAgenda.map(item => 
                typeof item === 'string' ? { text: item, remind: false } : item
            );
        } catch (e) {
            console.error("Erro ao carregar agenda do localStorage:", e);
            agendaItems = []; 
            localStorage.removeItem('agendaItems');
        }
    } else {
        agendaItems = [];
    }
  }

  function saveAgenda() {
    localStorage.setItem("agendaItems", JSON.stringify(agendaItems));
  }

  function addAgendaItem(itemText) {
    agendaItems.push({ text: itemText, remind: false });
    saveAgenda();
    return `Compromisso "${itemText}" agendado!`;
  }

  function viewAgenda() {
    if (agendaItems.length === 0) {
      return "Sua agenda est√° vazia.";
    }
    let response = "Seus compromissos:\n";
    agendaItems.forEach((item, index) => {
      const reminderMark = item.remind ? " (Lembrete Ativo)" : "";
      response += `${index + 1}. ${item.text}${reminderMark}\n`;
    });
    return response.trim();
  }

  function deleteAgendaItem(index) {
    const itemIndex = parseInt(index) - 1;
    if (isNaN(itemIndex) || itemIndex < 0 || itemIndex >= agendaItems.length) {
      return "N√∫mero do compromisso inv√°lido. Use 'ver agenda' para ver os n√∫meros.";
    }
    const deletedItem = agendaItems.splice(itemIndex, 1)[0];
    saveAgenda();
    return `Compromisso "${deletedItem.text}" apagado.`;
  }

  function toggleReminder(index) {
    const itemIndex = parseInt(index) - 1;
    if (isNaN(itemIndex) || itemIndex < 0 || itemIndex >= agendaItems.length) {
      return "N√∫mero do compromisso inv√°lido. Use 'ver agenda' para ver os n√∫meros.";
    }
    agendaItems[itemIndex].remind = !agendaItems[itemIndex].remind;
    saveAgenda();
    const status = agendaItems[itemIndex].remind ? "ativado" : "desativado";
    return `Lembrete ${status} para o compromisso ${index}.`;
  }

  function checkReminders() {
      const todaysAppointments = getAppointmentsForDay("hoje");
      const reminders = todaysAppointments.filter(item => item.remind);

      if (reminders.length > 0) {
          reminders.forEach(item => {
              addMessage(`üîî Lembrete: ${item.text}`, "reminder"); 
          });
      }
  }

  function getAppointmentsForDay(targetDayKeyword) {
      const hoje = new Date();
      hoje.setHours(0, 0, 0, 0); 
      let targetDate = new Date(hoje);
      
      const diasSemanaMap = {
          "domingo": 0, "segunda": 1, "ter√ßa": 2, "terca": 2, "quarta": 3, 
          "quinta": 4, "sexta": 5, "s√°bado": 6, "sabado": 6
      };

      if (targetDayKeyword === "amanh√£" || targetDayKeyword === "amanha") {
          targetDate.setDate(hoje.getDate() + 1);
      } else if (diasSemanaMap.hasOwnProperty(targetDayKeyword)) {
          const targetWeekday = diasSemanaMap[targetDayKeyword];
          const currentWeekday = hoje.getDay();
          let daysToAdd = targetWeekday - currentWeekday;
          if (daysToAdd <= 0) { daysToAdd += 7; }
          targetDate.setDate(hoje.getDate() + daysToAdd);
      } else if (targetDayKeyword !== "hoje") {
          targetDayKeyword = "hoje";
      }

      const dia = targetDate.getDate().toString().padStart(2, '0');
      const mes = (targetDate.getMonth() + 1).toString().padStart(2, '0');
      const ano = targetDate.getFullYear();
      const targetDateStr = `${dia}/${mes}`;
      const targetDateStrFull = `${dia}/${mes}/${ano}`;

      const otherDayKeywords = [
          "amanh√£", "depois de amanh√£", 
          "segunda", "ter√ßa", "terca", "quarta", "quinta", "sexta", "s√°bado", "sabado", "domingo",
          "pr√≥xima semana", "semana que vem",
          "pr√≥ximo m√™s", "m√™s que vem"
      ];
      const datePattern = /\b(\d{1,2}\/\d{1,2}(\/\d{2,4})?)\b/g;

      return agendaItems.filter(item => {
          const itemLower = item.text.toLowerCase();

          if (itemLower.includes(targetDateStr) || itemLower.includes(targetDateStrFull)) {
              return true;
          }
          if (targetDayKeyword !== "hoje" && itemLower.includes(targetDayKeyword)) {
               return true;
          }
          if (targetDayKeyword === "hoje" && itemLower.includes("hoje")) {
               return true;
          }
          if (targetDayKeyword === "hoje") {
              let mentionsOtherDay = false;
              if (otherDayKeywords.some(kw => itemLower.includes(kw))) {
                  mentionsOtherDay = true;
              }
              let match;
              while (!mentionsOtherDay && (match = datePattern.exec(itemLower)) !== null) {
                  const dateParts = match[1].split('/');
                  const day = parseInt(dateParts[0]);
                  const month = parseInt(dateParts[1]);
                  let year = dateParts[2] ? parseInt(dateParts[2].startsWith('/') ? dateParts[2].substring(1) : dateParts[2]) : hoje.getFullYear();
                  if (year < 100) year += 2000;
                  if (!isNaN(day) && !isNaN(month) && !isNaN(year)) {
                      const itemDate = new Date(year, month - 1, day);
                      itemDate.setHours(0,0,0,0);
                      if (itemDate > hoje) {
                          mentionsOtherDay = true;
                          break;
                      }
                  }
              }
              if (!mentionsOtherDay) {
                  return true;
              }
          }
          return false; 
      });
  }

  function viewAgendaForDay(targetDayKeyword) {
      const filteredItems = getAppointmentsForDay(targetDayKeyword);
      let dayDescription = targetDayKeyword;
      const diasSemanaNomes = {domingo: "domingo", segunda: "segunda", ter√ßa: "ter√ßa", terca: "ter√ßa", quarta: "quarta", quinta: "quinta", sexta: "sexta", s√°bado: "s√°bado", sabado: "s√°bado", amanh√£: "amanh√£", amanha: "amanh√£", hoje: "hoje"};
      dayDescription = diasSemanaNomes[targetDayKeyword] || "hoje";

      if (filteredItems.length === 0) {
        return `Voc√™ n√£o tem nenhum compromisso para ${dayDescription}, sua agenda est√° livre!`;
      }

      let response = `Seus compromissos para ${dayDescription}:\n`;
      filteredItems.forEach((item) => {
        const reminderMark = item.remind ? " (Lembrete Ativo)" : "";
        response += `- ${item.text}${reminderMark}\n`; 
      });
      return response.trim();
  }
  // --- Fim da Funcionalidade da Agenda ---

  // --- Funcionalidade de Previs√£o do Tempo (NOVO) ---
  const weatherApiUrl = "https://api.open-meteo.com/v1/forecast";
  const defaultLatitude = -1.29938; // Santa Izabel do Par√°
  const defaultLongitude = -48.161; // Santa Izabel do Par√°
  const defaultTimezone = "America/Belem";

  // Mapeamento de c√≥digos WMO para descri√ß√µes amig√°veis
  const wmoCodes = {
      0: "C√©u limpo",
      1: "Principalmente limpo",
      2: "Parcialmente nublado",
      3: "Nublado",
      45: "Nevoeiro",
      48: "Nevoeiro depositando gelo",
      51: "Chuvisco leve",
      53: "Chuvisco moderado",
      55: "Chuvisco denso",
      56: "Chuvisco congelante leve",
      57: "Chuvisco congelante denso",
      61: "Chuva leve",
      63: "Chuva moderada",
      65: "Chuva forte",
      66: "Chuva congelante leve",
      67: "Chuva congelante forte",
      71: "Neve leve",
      73: "Neve moderada",
      75: "Neve forte",
      77: "Gr√£os de neve",
      80: "Pancadas de chuva leves",
      81: "Pancadas de chuva moderadas",
      82: "Pancadas de chuva violentas",
      85: "Pancadas de neve leves",
      86: "Pancadas de neve fortes",
      95: "Trovoada leve ou moderada",
      96: "Trovoada com granizo leve",
      99: "Trovoada com granizo forte"
  };

  async function getWeatherForecast(dayKeyword = "hoje") {
      let forecastDays = 1;
      if (dayKeyword === "amanh√£" || dayKeyword === "amanha") {
          forecastDays = 2; // Pega hoje e amanh√£ para poder filtrar
      }

      const params = new URLSearchParams({
          latitude: defaultLatitude,
          longitude: defaultLongitude,
          daily: "weathercode,temperature_2m_max,temperature_2m_min,precipitation_probability_max",
          timezone: defaultTimezone,
          forecast_days: forecastDays
      });

      try {
          addMessage("Consultando previs√£o do tempo...", "bot"); // Feedback visual
          const response = await fetch(`${weatherApiUrl}?${params}`);
          if (!response.ok) {
              throw new Error(`Erro na API: ${response.statusText}`);
          }
          const data = await response.json();
          
          if (!data || !data.daily || !data.daily.time || data.daily.time.length === 0) {
              return "N√£o consegui obter a previs√£o do tempo agora.";
          }

          const index = (dayKeyword === "amanh√£" || dayKeyword === "amanha") ? 1 : 0;
          if (index >= data.daily.time.length) {
              return "N√£o consegui obter a previs√£o para o dia solicitado.";
          }

          const date = data.daily.time[index];
          const code = data.daily.weathercode[index];
          const maxTemp = data.daily.temperature_2m_max[index];
          const minTemp = data.daily.temperature_2m_min[index];
          const precipProb = data.daily.precipitation_probability_max[index];

          const description = wmoCodes[code] || "Condi√ß√£o desconhecida";
          const dayDescription = (dayKeyword === "amanh√£" || dayKeyword === "amanha") ? "Amanh√£" : "Hoje";

          return `Previs√£o para ${dayDescription} em Santa Izabel do Par√° (${date}):\n- Condi√ß√£o: ${description}\n- M√°xima: ${maxTemp}¬∞C\n- M√≠nima: ${minTemp}¬∞C\n- Prob. Chuva: ${precipProb}%`;

      } catch (error) {
          console.error("Erro ao buscar previs√£o do tempo:", error);
          return "Desculpe, tive um problema ao buscar a previs√£o do tempo. Tente novamente mais tarde.";
      }
  }
  // --- Fim da Funcionalidade de Previs√£o do Tempo ---


  // Dicion√°rio APRIMORADO de erros de digita√ß√£o comuns
  const commonTypos = {
    "ola": "oi", "oii": "oi", "oie": "oi",
    "blz": "beleza",
    "td bem": "tudo bem", "tudo bom": "tudo bem",
    "obg": "obrigado",
    "vlw": "valeu",
    "vc": "voc√™",
    "tbm": "tamb√©m", "tb": "tamb√©m",
    "pq": "por que",
    "qm": "quem",
    "qd": "quando",
    "msg": "mensagem",
    "ok": "okay",
    "oq": "o que",
    "pra": "para",
    "hj": "hoje",
    "comprovante": "compromisso", "comprovantes": "compromissos",
    "agenda hj": "agenda hoje", "compromisso hj": "compromisso hoje",
    "amanha": "amanh√£", 
    "segunda-feira": "segunda", "terca-feira": "ter√ßa", "quarta-feira": "quarta", 
    "quinta-feira": "quinta", "sexta-feira": "sexta", "sabado": "s√°bado",
    "lembrar\s*:\s*": "lembrar ", 
    "agendar\s*:\s*": "agendar ", "apagar\s*:\s*": "apagar ", "excluir\s*:\s*": "apagar ",
    "previsao tempo": "previs√£o do tempo", "como esta o tempo": "previs√£o do tempo", "vai chover": "previs√£o do tempo" // Adiciona varia√ß√µes para tempo
  };

  let learningMode = false;
  let pendingQuestion = "";

  function addMessage(text, sender) {
    const msgDiv = document.createElement("div");
    let cssClass = sender; // bot, user, reminder
    if (sender === 'weather') cssClass = 'weather'; // Classe espec√≠fica para tempo
    else if (sender === 'reminder') cssClass = 'reminder';
    
    msgDiv.classList.add("message", cssClass);
    msgDiv.style.whiteSpace = "pre-wrap"; 
    msgDiv.textContent = text;
    chat.appendChild(msgDiv);
    setTimeout(() => {
        msgDiv.style.opacity = 1;
        msgDiv.style.transform = "translateY(0)";
    }, 10); 
    chat.scrollTop = chat.scrollHeight;
  }

  function cleanText(text) {
    let cleaned = text.toLowerCase();
    for (let typo in commonTypos) {
      const regex = new RegExp(typo.replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&'), 'g'); 
      cleaned = cleaned.replace(regex, commonTypos[typo]);
    }
    cleaned = cleaned.replace(/[^\w\s√°√©√≠√≥√∫√£√µ√¢√™√Æ√¥√ª√ß\/\+\-\*]/gi, " ").replace(/\s+/g, ' ').trim();
    return cleaned;
  }

  function tryCalculate(text) {
    text = text.replace("x", "*").replace("√ó", "*").replace("√∑", "/").replace(",", ".");
    const match = text.match(/(\d*\.?\d+)\s*([\+\-\*\/])\s*(\d*\.?\d+)/);
    if (match) {
      try {
        const a = parseFloat(match[1]);
        const b = parseFloat(match[3]);
        const op = match[2];
        if (isNaN(a) || isNaN(b)) return null;
        let result;
        switch (op) {
          case "+": result = a + b; break;
          case "-": result = a - b; break;
          case "*": result = a * b; break;
          case "/": result = b !== 0 ? a / b : "Erro: divis√£o por zero"; break;
          default: return null;
        }
        return typeof result === "number" ? `O resultado √© ${parseFloat(result.toFixed(5))}` : result;
      } catch {
        return null;
      }
    }
    return null;
  }

  // Fun√ß√£o APRIMORADA de resposta do bot
  async function botResponse(input) { // Tornou-se async para aguardar a API
    const originalInput = input.trim();
    const text = cleanText(originalInput); 

    // --- Processamento de Previs√£o do Tempo (ANTES da agenda para priorizar) ---
    if (text.includes("previs√£o do tempo")) {
        let dayKeyword = "hoje";
        if (text.includes("amanh√£")) {
            dayKeyword = "amanh√£";
        }
        const weatherResult = await getWeatherForecast(dayKeyword);
        // Adiciona a mensagem de tempo com estilo espec√≠fico
        addMessage(weatherResult, 'weather'); 
        return null; // Retorna null pois a mensagem j√° foi adicionada
    }

    // --- Processamento de Comandos da Agenda ---
    if (text.startsWith("agendar ")) {
        const itemText = originalInput.substring(originalInput.toLowerCase().indexOf("agendar ") + 8).trim();
        return itemText ? addAgendaItem(itemText) : "Por favor, diga o que voc√™ quer agendar.";
    }
    if (text === "ver agenda" || text === "minha agenda" || text.includes("todos compromissos")) {
        return viewAgenda();
    }
    if (text.startsWith("apagar ")) {
        const parts = text.split(" ");
        const itemIndex = parts.find(part => !isNaN(parseInt(part)));
        return itemIndex ? deleteAgendaItem(itemIndex) : "Por favor, informe o n√∫mero do compromisso a apagar.";
    }
    if (text.startsWith("lembrar ") || text.startsWith("lembrete ")) {
        const parts = text.split(" ");
        const itemIndex = parts.find(part => !isNaN(parseInt(part)));
        return itemIndex ? toggleReminder(itemIndex) : "Por favor, informe o n√∫mero do compromisso para o lembrete.";
    }
    
    const keywordsAgenda = ["agenda", "compromisso", "compromissos", "tarefa", "tarefas", "o que tenho", "quais sao", "quais meus"];
    const diasSemana = ["hoje", "amanh√£", "segunda", "ter√ßa", "terca", "quarta", "quinta", "sexta", "s√°bado", "sabado", "domingo"];
    let targetDay = null;
    for (const dia of diasSemana) {
        if (text.includes(dia) && keywordsAgenda.some(kw => text.includes(kw))) {
            targetDay = dia; break;
        }
    }
    if (!targetDay && (text === "agenda hoje" || text === "compromissos hoje")) targetDay = "hoje";
    if (!targetDay && (text === "agenda amanh√£" || text === "compromissos amanh√£")) targetDay = "amanh√£";
    if (targetDay) {
        if (targetDay === "terca") targetDay = "ter√ßa";
        if (targetDay === "sabado") targetDay = "s√°bado";
        return viewAgendaForDay(targetDay);
    }
    // --- Fim do Processamento de Comandos da Agenda ---

    // Modo Aprendizado
    if (learningMode) {
      if (text === "sim") {
        addMessage("Qual a resposta que devo aprender para: '" + pendingQuestion + "'?", "bot");
        learningMode = "waitingAnswer";
        return null; 
      }
      if (text === "n√£o" || text === "nao") {
        learningMode = false; pendingQuestion = "";
        return "Ok, talvez na pr√≥xima!";
      }
      if (learningMode === "waitingAnswer") {
        saveLearnedKnowledge(pendingQuestion, originalInput); 
        learningMode = false; pendingQuestion = "";
        return "Aprendi! Obrigado por me ensinar.";
      }
    }

    // Busca na Base de Conhecimento
    if (knowledge[text]) {
      const respostas = knowledge[text];
      return respostas[Math.floor(Math.random() * respostas.length)];
    }

    // Tenta C√°lculo Matem√°tico
    const calc = tryCalculate(text);
    if (calc) return calc;

    // Tenta aprender
    pendingQuestion = text; 
    learningMode = true;
    return `N√£o sei responder "${originalInput}". Quer me ensinar como responder? (sim/n√£o)`;
  }

  // Modificado para ser async
  async function sendMessage() {
    const text = userInput.value.trim();
    if (!text) return;
    addMessage(text, "user");
    userInput.value = "";

    const typingIndicator = document.createElement("div");
    typingIndicator.classList.add("message", "bot");
    typingIndicator.textContent = "ULTRON est√° pensando..."; // Mudado para "pensando" por causa da API
    typingIndicator.style.opacity = 0.6;
    typingIndicator.style.fontStyle = "italic";
    chat.appendChild(typingIndicator);
    chat.scrollTop = chat.scrollHeight;

    // Aguarda a resposta do bot (que pode chamar a API)
    const response = await botResponse(text);
    
    if (chat.contains(typingIndicator)) {
        chat.removeChild(typingIndicator);
    }
    // Adiciona a resposta APENAS se botResponse retornar algo (n√£o retorna para previs√£o do tempo)
    if (response) {
      addMessage(response, "bot");
    }
  }

  userInput.addEventListener("keydown", (e) => {
    if (e.key === "Enter") {
      sendMessage();
    }
  });

</script>
<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/11.8.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/11.8.1/firebase-auth-compat.js"></script>
<script>
  const firebaseConfig = {
    apiKey: "AIzaSyCsXT7QaBPdAiBrNlYkgh_12W8V69FU1XI",
    authDomain: "ultron-10a7c.firebaseapp.com",
    projectId: "ultron-10a7c",
    storageBucket: "ultron-10a7c.firebasestorage.app",
    messagingSenderId: "572864287623",
    appId: "1:572864287623:web:18deaae57b184808b23922"
  };

  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();

  async function loginWithGoogle() {
    const provider = new firebase.auth.GoogleAuthProvider();
    try {
      const result = await auth.signInWithPopup(provider);
      const user = result.user;
      const nome = user.displayName;
      const email = user.email;
      const uid = user.uid;

      document.getElementById("login-area").style.display = "none";
      document.getElementById("chat-area").style.display = "flex";
      document.getElementById("input-area").style.display = "flex";

      console.log("Usu√°rio logado com Google:", nome, email, uid);
      loadKnowledge();
      loadAgenda();
      checkReminders();
      userInput.focus();
    } catch (error) {
      console.error("Erro no login com Google:", error);
      alert("Erro ao fazer login com o Google.");
    }
  }

function toggleProfile() {
  const panel = document.getElementById("profile-panel");
  panel.style.display = panel.style.display === "none" ? "block" : "none";
}

function logout() {
  firebase.auth().signOut().then(() => {
    alert("Voc√™ saiu.");
    location.reload();
  });
}

document.addEventListener('DOMContentLoaded', function () {
  if (typeof firebase !== "undefined") {
    firebase.auth().onAuthStateChanged(user => {
      if (user) {
        const nome = user.displayName;
        const email = user.email;
        document.getElementById("user-name").innerText = nome;
        document.getElementById("user-email").innerText = email;
        document.getElementById("profile-toggle").style.display = "block";
      }
    });
  }
});
</script>
</body>
</html>
